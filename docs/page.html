<!DOCTYPE html>  <html> <head>   <title>page.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               page.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h3>This file contains the backbone model and view used in the example page.</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>A function to load templates from html. In a Rails application, these would be 
in jst files that are made available in the front end in the JST variable.
For this standalone app, they are defined in the html in a 
<code>&lt;script type="text/html"&gt;...&lt;/script&gt;</code> tag.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">templates</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">function</span> <span class="nx">load_templates</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>templates are underscore templates defined in script elements with type 'text/html'.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">scripts</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
  <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">scripts</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">script</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">script</span> <span class="o">&amp;&amp;</span> <span class="nx">script</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">&amp;&amp;</span> <span class="nx">script</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;text/html&quot;</span> <span class="p">))</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>compile the template with underscore and store it.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">templates</span><span class="p">[</span><span class="nx">script</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h3>We now define a Backbone model and a view.</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h4>Contact model</h4>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">Contact</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h4>Contact view</h4>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">ContactView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">tagName</span><span class="o">:</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>set the template for this view.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="nx">templates</span><span class="p">[</span><span class="s1">&#39;contact_template&#39;</span><span class="p">];</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>render the template with the model passed in during view creation.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">({</span><span class="nx">contact</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">}));</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h3>Data</h3>

<p>JSON that represents contact data (that would normally come from the server). <br />
If the result of a server operation has errors, the data has an errors hash 
that contains attribute names and corresponding error messages.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span> 
  <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">first_name</span><span class="o">:</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span>
  <span class="nx">last_name</span><span class="o">:</span> <span class="s1">&#39;Smith&#39;</span><span class="p">,</span>
  <span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;jsmith@example.com&#39;</span><span class="p">,</span>
  <span class="nx">about</span><span class="o">:</span> <span class="s1">&#39;a description for this user account&#39;</span><span class="p">,</span>
  <span class="nx">street_1</span><span class="o">:</span> <span class="s1">&#39;123 California Way&#39;</span><span class="p">,</span>
  <span class="nx">street_2</span><span class="o">:</span> <span class="s1">&#39;Apt 456&#39;</span><span class="p">,</span>
  <span class="nx">city</span><span class="o">:</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">,</span>
  <span class="nx">state</span><span class="o">:</span> <span class="s1">&#39;California&#39;</span><span class="p">,</span>
  <span class="nx">zip</span><span class="o">:</span> <span class="s1">&#39;94111&#39;</span><span class="p">,</span>
  <span class="nx">is_admin</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>errors hash that contains an error for the email field</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">errors</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;email&#39;</span><span class="o">:</span> <span class="s1">&#39;An account with this email address already exists&#39;</span> <span class="p">}</span> 
<span class="p">};</span> </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h3>Render the view</h3>

<p>On document load, render the view.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  </pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>load the templates.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">load_templates</span><span class="p">();</span>
 </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Create contact views with json data</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ContactView</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Contact</span><span class="p">(</span><span class="nx">data</span><span class="p">)});</span>
  </pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>render the contact</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#contact-form&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">);</span>

<span class="p">});</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 